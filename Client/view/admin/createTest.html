<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo Đề Thi</title>
    <link rel="stylesheet" href="createTest.css">
</head>
<body>
    <div class="container">
        <header>
            <nav>
                <ul class="menu">
                    <li><a href="#tao-de-thi">Tạo đề thi</a></li>
                    <li><a href="#de-thi-cong-khai">Đề thi công khai</a></li>
                    <li><a href="#de-thi-ca-nhan">Đề thi cá nhân</a></li>
                    <li><a href="#tim-kiem-de-thi">Tìm kiếm đề thi</a></li>
                </ul>
            </nav>
        </header>
        
        <main>
            <section id="tao-de-thi" class="create-exam">
                <h2>Tạo Đề Thi</h2>
                <form id="exam-form">
                    <label for="exam-title">Tiêu Đề Đề Thi:</label>
                    <input type="text" id="exam-title" name="exam-title" required>

                    <label for="exam-subject">Môn Học:</label>
                    <input type="text" id="exam-subject" name="exam-subject" required>

                    <label for="exam-type">Loại Đề Thi:</label>
                    <select id="exam-type" name="exam-type">
                        <option value="public">Công Khai</option>
                        <option value="private">Riêng Tư</option>
                    </select>

                    <label for="exam-category">Chủ Đề:</label>
                    <input type="text" id="exam-category" name="exam-category" required>

                    <label for="exam-section">Phần:</label>
                    <input type="text" id="exam-section" name="exam-section">

                    <button type="button" onclick="addQuestion()">Thêm Câu Hỏi</button>
                </form>

                <div id="question-list">
                    <h3>Danh Sách Câu Hỏi</h3>
                    <!-- Data mẫu -->
                    <div class="question-item">
                        <p><strong>Câu 1:</strong> Lorem ipsum dolor sit amet?</p>
                        <button onclick="editQuestion(this)">Sửa</button>
                        <button onclick="deleteQuestion(this)">Xóa</button>
                    </div>
                    <div class="question-item">
                        <p><strong>Câu 2:</strong> Quis autem vel eum iure reprehenderit?</p>
                        <button onclick="editQuestion(this)">Sửa</button>
                        <button onclick="deleteQuestion(this)">Xóa</button>
                    </div>
                </div>

                <h3>Import Câu Hỏi Trắc Nghiệm</h3>
                <button onclick="downloadTemplate()">Tải File Template</button>
                <input type="file" id="import-file" name="import-file">
                <button onclick="importQuestions()">Import Câu Hỏi</button>
            </section>

            <section id="de-thi-cong-khai" class="public-exams">
                <h2>Đề Thi Công Khai</h2>
                <div class="exam-list">
                    <!-- Data mẫu -->
                    <div class="exam-item">
                        <p><strong>Tiêu Đề:</strong> Đề Thi Toán 1</p>
                        <p><strong>Môn Học:</strong> Toán</p>
                        <p><strong>Số Lượt Thi:</strong> 120</p>
                        <button>Tải Xuống</button>
                    </div>
                    <div class="exam-item">
                        <p><strong>Tiêu Đề:</strong> Đề Thi Văn 1</p>
                        <p><strong>Môn Học:</strong> Văn</p>
                        <p><strong>Số Lượt Thi:</strong> 98</p>
                        <button>Tải Xuống</button>
                    </div>
                </div>
            </section>

            <section id="de-thi-ca-nhan" class="private-exams">
                <h2>Đề Thi Cá Nhân</h2>
                <div class="exam-list">
                    <!-- Data mẫu -->
                    <div class="exam-item">
                        <p><strong>Tiêu Đề:</strong> Đề Thi Lịch Sử 1</p>
                        <p><strong>Môn Học:</strong> Lịch Sử</p>
                        <p><strong>Số Lượt Thi:</strong> 45</p>
                        <button>Tải Xuống</button>
                    </div>
                    <div class="exam-item">
                        <p><strong>Tiêu Đề:</strong> Đề Thi Địa Lý 1</p>
                        <p><strong>Môn Học:</strong> Địa Lý</p>
                        <p><strong>Số Lượt Thi:</strong> 60</p>
                        <button>Tải Xuống</button>
                    </div>
                </div>
            </section>

            <section id="tim-kiem-de-thi" class="search-exams">
                <h2>Tìm Kiếm Đề Thi</h2>
                <form id="search-form">
                    <label for="search-keyword">Từ Khóa:</label>
                    <input type="text" id="search-keyword" name="search-keyword" required>
                    <button type="submit">Tìm Kiếm</button>
                </form>
                <div id="search-results">
                    <h3>Kết Quả Tìm Kiếm</h3>
                    <!-- Data mẫu -->
                    <div class="exam-item">
                        <p><strong>Tiêu Đề:</strong> Đề Thi Sinh Học 1</p>
                        <p><strong>Môn Học:</strong> Sinh Học</p>
                        <p><strong>Số Lượt Thi:</strong> 70</p>
                        <button>Tải Xuống</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        function addQuestion() {
            const questionList = document.getElementById('question-list');
            const questionItem = document.createElement('div');
            questionItem.classList.add('question-item');
            questionItem.innerHTML = `
                <p><strong>Câu :</strong> Nội dung câu hỏi</p>
                <button onclick="editQuestion(this)">Sửa</button>
                <button onclick="deleteQuestion(this)">Xóa</button>
            `;
            questionList.appendChild(questionItem);
        }

        function editQuestion(button) {
            // Logic sửa câu hỏi
            alert('Sửa câu hỏi');
        }

        function deleteQuestion(button) {
            const questionItem = button.parentElement;
            questionItem.remove();
        }

        function downloadTemplate() {
            const template = [
                ["Câu hỏi", "Đáp án A", "Đáp án B", "Đáp án C", "Đáp án D", "Đáp án đúng", "Giải thích"],
                ["Ví dụ câu hỏi 1", "A", "B", "C", "D", "A", "Giải thích cho câu hỏi 1"]
            ];
            let csvContent = "data:text/csv;charset=utf-8,";
            template.forEach(function(rowArray) {
                let row = rowArray.join(",");
                csvContent += row + "\r\n";
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "template_import.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function importQuestions() {
            const fileInput = document.getElementById('import-file');
            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const text = e.target.result;
                const rows = text.split('\n');
                rows.forEach((row, index) => {
                    if (index === 0) return; // Skip header
                    const cols = row.split(',');
                    if (cols.length < 6) return; // Skip if not enough columns
                    addImportedQuestion(cols);
                });
            };

            if (file) {
                reader.readAsText(file);
            } else {
                alert('Vui lòng chọn file để import.');
            }
        }

        function addImportedQuestion(cols) {
            const questionList = document.getElementById('question-list');
            const questionItem = document.createElement('div');
            questionItem.classList.add('question-item');
            questionItem.innerHTML = `
                <p><strong>Câu :</strong> ${cols[0]}</p>
                <p><strong>Đáp án A:</strong> ${cols[1]}</p>
                <p><strong>Đáp án B:</strong> ${cols[2]}</p>
                <p><strong>Đáp án C:</strong> ${cols[3]}</p>
                <p><strong>Đáp án D:</strong> ${cols[4]}</p>
                <p><strong>Đáp án đúng:</strong> ${cols[5]}</p>
                <p><strong>Giải thích:</strong> ${cols[6]}</p>
                <button onclick="editQuestion(this)">Sửa</button>
                <button onclick="deleteQuestion(this)">Xóa</button>
            `;
            questionList.appendChild(questionItem);
        }
    </script>
</body>
</html>
